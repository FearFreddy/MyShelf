<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% load static %} <link href="{% static "shelf/main.css" %}"
    rel="stylesheet" type="text/css" media="screen" />
  </head>
  <body>
    {% if error_message %}
    <p>
      <strong>{{ error_message }}</strong>
    </p>
    {% endif %}
    </br>
    <a href="{% url 'shelf:index' %}">« Zurück zum Shelf</a>
    {% if folder.parent_folder.id %}
    </br>
    </br>
    <a href="{% url 'shelf:folder_detail' folder.parent_folder.id %}">
      ‹ Zurück zu {{ folder.parent_folder }}
    </a>
    {% endif %}
    <h1>{{ folder.folder_name }}</h1> 
    <ul>
    {% if folder.todo_set.all %}
      {% for todo in folder.todo_set.all %}
      <li class="todos">
        {{ todo.todo_text }}  
        <form action="{% url 'shelf:delete_todo' %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="todo_id" value="{{ todo.id }}" />
          <input type="submit" value="×" class="delete_todo_button" />
        </form>
      </li>
      {% endfor %}
      {% endif %} 
      <form action="{% url 'shelf:create_todo' folder.id %}" method="post">
        {% csrf_token %}
        <input
          type="text"
          name="todo_text"
          id="todo_text"
          class="add_todo"
          value=""
          placeholder="Neues Todo anlegen..."
        />
        <input type="submit" value="+" class="add_button" />
      </form>
    </ul>
    <hr size="1" />
    <ul>
      {% if subfolders %} {% for subfolder in subfolders %}
      <li class="folder">
        <a href="{% url 'shelf:folder_detail' subfolder.id %}">
          <i>{{ folder.folder_name }} </i> / {{ subfolder.folder_name }} ({{ subfolder.todos_inside_count }})
        </a>
        <form action="{% url 'shelf:delete_folder' %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="folder_id" value="{{ subfolder.id }}" />
          <input type="submit" value="×" class="delete_folder_button" />
        </form>
      </li>
      {% endfor %} {% endif %}
      <form action="{% url 'shelf:create_folder' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="parent_folder" value="{{ folder.id }}" />
        <input
          type="text"
          name="folder_name"
          value=""
          placeholder="Neuen Unterordner anlegen..."
        />
        <input type="submit" value="+" class="add_button" />
      </form>
    </ul>
  </body>
</html>
